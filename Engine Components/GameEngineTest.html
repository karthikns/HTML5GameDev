<!DOCTYPE html>
<html>
	<head>
		<title> Game Engine Test </title>
		<script src="RenderEngine.js"> </script>
		<script src="physicsEngine.js"> </script>
		<script src="InputEngine.js"> </script>
		<script src="GameEngine.js"> </script>
        <script src="Box2dWeb-2.1.a.3.js"></script>

		<script>
		<!--
		function setup()
		{
			gGameEngine.initialize("configuration/renderConfig.json", init);

			var canvasElement = document.getElementById("my_canvas");
			gGameEngine.setCanvas(canvasElement);
		}

        function render()
        {
            renderPool.render();
            setTimeout(render, 1000/60); //60FPS
        }

        function EnemyPool()
        {
        }

        EnemyPool.prototype.pool = null;

        EnemyPool.prototype.initialize = function(numRow, numCol)
        {
        	this.pool = new Array();

        	for(var row = 0; row < numRow; ++row)
        	{
	        	for(var col = 0; col < numCol; ++col)
	        	{
	        		var x = 70 + col * 60;
	        		var y = 30 + row * 50;

					var enemyShip = new Ship();
					enemyShip.setPosition(x, y);
					enemyShip.setWidthHeight(42, 32);
					enemyShip.setImage("eship");

		            this.pool[this.pool.length] = enemyShip;

		            enemyShip.initialize();
	        	}
        	}
        }

		function init()
		{
			var scrollRend = new ImageRendererScroll("bg", 32, 0);
			scrollRend.x = 120;
			scrollRend.y = 10;
			renderPool.addObject(scrollRend);
			scrollRend.startScroll();

			var enemyPool = new EnemyPool();
			enemyPool.initialize(2, 5);

            for(var i=0; i<enemyPool.pool.length; i++ )
            {
                enemyPool.pool[i].moveLeft();
            }

            var playerShip = new PlayerShip();
            playerShip.setPosition(250, 250);
            playerShip.setWidthHeight(42,32);
            playerShip.setImage("ship");
            playerShip.setLeftKey(37);
            playerShip.setUpKey(38);
            playerShip.setRightKey(39);
            playerShip.setDownKey(40);
            playerShip.initialize();

			gGameEngine.beginGame();
		}

		-->
		</script>
	</head>
	<body onload="setup()">
		<canvas id="my_canvas" width="500" height="300" style="border:1px solid #FF0000;"> </canvas>

        <canvas id="physics_canvas" width="500" height="300" style="border:1px solid #FF0000;"> </canvas>
	</body>
</html>